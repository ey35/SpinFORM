<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicVault - Your Personal Music Library</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                    <circle cx="40" cy="40" r="35" stroke="#1DB954" stroke-width="3"/>
                    <path d="M30 35 L30 45 M35 32 L35 48 M40 28 L40 52 M45 32 L45 48 M50 35 L50 45" stroke="#1DB954" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <h2>MusicVault</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Dynamic Background -->
    <div id="dynamic-bg" class="dynamic-background"></div>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 14 L12 18 M14 13 L14 19 M16 11 L16 21 M18 13 L18 19 M20 14 L20 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h1>MusicVault</h1>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <button class="nav-item active" data-view="songs">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M18 3v2H6V3h12zM6 7h12v2H6V7zm0 4h12v2H6v-2zm0 4h12v2H6v-2zM2 3h2v2H2V3zm0 4h2v2H2V7zm0 4h2v2H2v-2zm0 4h2v2H2v-2z"/>
                </svg>
                Songs
            </button>
            <button class="nav-item" data-view="albums">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M4 3h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm6 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/>
                </svg>
                Albums
            </button>
            <button class="nav-item" data-view="favorites">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 3.5l2.5 5.5h6l-4.5 4 2 6-6-4-6 4 2-6-4.5-4h6l2.5-5.5z"/>
                </svg>
                Favorites
            </button>
            <button class="nav-item" data-view="upload">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 2L6 6h3v6h2V6h3l-4-4zm8 8v8H2v-8h2v6h12v-6h2z"/>
                </svg>
                Upload Music
            </button>
        </nav>
        
        <div class="sidebar-footer">
            <div class="storage-info">
                <div class="storage-label">Library Storage</div>
                <div class="storage-bar">
                    <div class="storage-fill" id="storage-fill"></div>
                </div>
                <div class="storage-text" id="storage-text">0 tracks</div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-header">
            <div class="search-container">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"/>
                </svg>
                <input type="text" id="search-input" class="search-input" placeholder="Search songs, albums, artists...">
            </div>
            <div class="view-controls">
                <select id="sort-select" class="sort-select">
                    <option value="recent">Recently Added</option>
                    <option value="title">Title</option>
                    <option value="artist">Artist</option>
                    <option value="album">Album</option>
                </select>
            </div>
        </div>

        <!-- Songs View -->
        <section id="songs-view" class="view active">
            <div class="view-title">
                <h2>Songs</h2>
                <span class="track-count" id="songs-count">0 tracks</span>
            </div>
            
            <div id="songs-list" class="songs-list">
                <!-- Songs will be rendered here -->
            </div>
            
            <div id="songs-empty" class="empty-state">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="2"/>
                    <path d="M24 28 L24 36 M28 26 L28 38 M32 22 L32 42 M36 26 L36 38 M40 28 L40 36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h3>No songs yet</h3>
                <p>Upload your first tracks to get started</p>
                <button class="btn-primary" onclick="switchView('upload')">Upload Music</button>
            </div>
        </section>

        <!-- Albums View -->
        <section id="albums-view" class="view">
            <div class="view-title">
                <h2>Albums</h2>
                <span class="track-count" id="albums-count">0 albums</span>
            </div>
            
            <div id="albums-grid" class="albums-grid">
                <!-- Albums will be rendered here -->
            </div>
            
            <div id="albums-empty" class="empty-state">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <rect x="12" y="12" width="40" height="40" rx="2" stroke="currentColor" stroke-width="2"/>
                    <circle cx="32" cy="32" r="12" stroke="currentColor" stroke-width="2"/>
                    <circle cx="32" cy="32" r="4" fill="currentColor"/>
                </svg>
                <h3>No albums yet</h3>
                <p>Upload music with album metadata to see them here</p>
            </div>
        </section>

        <!-- Favorites View -->
        <section id="favorites-view" class="view">
            <div class="view-title">
                <h2>Favorites</h2>
                <span class="track-count" id="favorites-count">0 tracks</span>
            </div>
            
            <div id="favorites-list" class="songs-list">
                <!-- Favorite songs will be rendered here -->
            </div>
            
            <div id="favorites-empty" class="empty-state">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <path d="M32 12l8 16h18l-14 12 6 18-18-12-18 12 6-18-14-12h18l8-16z" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
                <h3>No favorites yet</h3>
                <p>Mark songs as favorites to see them here</p>
            </div>
        </section>

        <!-- Upload View -->
        <section id="upload-view" class="view">
            <div class="view-title">
                <h2>Upload Music</h2>
                <p class="view-subtitle">Drag and drop your audio files or click to browse</p>
            </div>
            
            <div class="upload-zone" id="upload-zone">
                <input type="file" id="file-input" accept="audio/*" multiple hidden>
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <path d="M32 8 L32 40 M20 28 L32 16 L44 28" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 40 L12 52 C12 54.2091 13.7909 56 16 56 L48 56 C50.2091 56 52 54.2091 52 52 L52 40" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <h3>Drop files here</h3>
                <p>or click to browse</p>
                <span class="file-types">MP3, WAV, FLAC, OGG, M4A</span>
            </div>
            
            <div id="upload-queue" class="upload-queue"></div>
        </section>

        <!-- Album Detail View -->
        <section id="album-detail-view" class="view">
            <button class="back-btn" onclick="switchView('albums')">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 18l-8-8 8-8 1.414 1.414L5.828 9H18v2H5.828l5.586 5.586L10 18z"/>
                </svg>
                Back to Albums
            </button>
            <div id="album-detail-content"></div>
        </section>
    </main>

    <!-- Player -->
    <div id="player" class="player hidden">
        <div class="player-track-info">
            <img id="player-artwork" class="player-artwork" src="" alt="">
            <div class="player-text">
                <div class="player-title" id="player-title">Track Title</div>
                <div class="player-artist" id="player-artist">Artist Name</div>
            </div>
            <button class="control-btn favorite-player-btn" id="favorite-player-btn" title="Add to Favorites">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10 3.5l2.5 5.5h6l-4.5 4 2 6-6-4-6 4 2-6-4.5-4h6l2.5-5.5z"/>
                </svg>
            </button>
        </div>
        
        <div class="player-controls-section">
            <div class="player-buttons">
                <button class="control-btn" id="shuffle-btn" title="Shuffle">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15 3l4 4-4 4M3 3l4 4-4 4M7 7l6 6M7 13l6-6M15 13l4 4-4 4"/>
                    </svg>
                </button>
                <button class="control-btn" id="prev-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4 3h2v14H4V3zm12 0l-8 7 8 7V3z"/>
                    </svg>
                </button>
                <button class="control-btn play-pause-btn" id="play-pause-btn">
                    <svg id="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg id="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                    </svg>
                </button>
                <button class="control-btn" id="next-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M14 3h2v14h-2V3zM4 3l8 7-8 7V3z"/>
                    </svg>
                </button>
                <button class="control-btn" id="repeat-btn" title="Repeat">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4 7h12v2H4V7zm0 4h12v2H4v-2zM18 3l-4 4 4 4M2 17l4-4-4-4"/>
                    </svg>
                </button>
                <button class="control-btn" id="lyrics-btn" title="Show Lyrics">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 4h14v2H3V4zm0 4h14v2H3V8zm0 4h10v2H3v-2z"/>
                    </svg>
                </button>
            </div>
            
            <div class="player-progress-container">
                <span class="time-label" id="current-time">0:00</span>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                        <div class="progress-handle" id="progress-handle"></div>
                    </div>
                </div>
                <span class="time-label" id="duration-time">0:00</span>
            </div>
        </div>
        
        <div class="player-volume-section">
            <button class="control-btn" id="volume-btn">
                <svg id="volume-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 3.5L5 7H2v6h3l5 3.5V3.5zm4 2.25v8.5c1.5-1 2.5-2.75 2.5-4.25S15.5 6.75 14 5.75z"/>
                </svg>
            </button>
            <div class="volume-slider-container">
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="80">
            </div>
        </div>
        
        <audio id="audio-player"></audio>
    </div>

    <!-- Upload Type Modal -->
    <div id="upload-type-modal" class="modal">
        <div class="modal-content">
            <h2>What are you uploading?</h2>
            <p>This helps us organize your music better</p>
            <div class="upload-type-buttons">
                <button class="upload-type-btn" data-type="songs">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                        <path d="M38 6v4H14V6h24zM14 14h24v4H14v-4zm0 8h24v4H14v-4zm0 8h24v4H14v-4zM6 6h4v4H6V6zm0 8h4v4H6v-4zm0 8h4v4H6v-4zm0 8h4v4H6v-4z"/>
                    </svg>
                    <h3>Individual Songs</h3>
                    <p>Separate tracks from different sources</p>
                </button>
                <button class="upload-type-btn" data-type="album">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                        <path d="M10 6h28a2 2 0 0 1 2 2v32a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm14 28a10 10 0 1 0 0-20 10 10 0 0 0 0 20zm0-4a6 6 0 1 1 0-12 6 6 0 0 1 0 12z"/>
                    </svg>
                    <h3>Album</h3>
                    <p>Collection of tracks from the same album</p>
                </button>
            </div>
        </div>
    </div>

    <!-- Lyrics Modal -->
    <div id="lyrics-modal" class="modal">
        <div class="modal-content lyrics-modal-content">
            <div class="modal-header">
                <h2>Lyrics</h2>
                <button class="close-modal" onclick="closeLyricsModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="lyrics-content">
                <div id="lyrics-display" class="lyrics-display">
                    <p class="no-lyrics">No lyrics available</p>
                </div>
                <div class="lyrics-controls">
                    <button class="btn-secondary" onclick="editLyrics()">Edit Lyrics</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Lyrics Modal -->
    <div id="edit-lyrics-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Lyrics</h2>
                <button class="close-modal" onclick="closeEditLyricsModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="lyrics-editor">
                <textarea id="lyrics-textarea" class="lyrics-textarea" placeholder="Enter lyrics here...

For synced lyrics, use this format:
[00:12.50] First line of lyrics
[00:15.30] Second line of lyrics"></textarea>
                <div class="lyrics-editor-controls">
                    <label class="checkbox-label">
                        <input type="checkbox" id="synced-lyrics-toggle">
                        <span>Enable synced lyrics (LRC format)</span>
                    </label>
                    <div class="button-group">
                        <button class="btn-secondary" onclick="closeEditLyricsModal()">Cancel</button>
                        <button class="btn-primary" onclick="saveLyrics()">Save Lyrics</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" data-action="play">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M4 2v12l10-6z"/>
            </svg>
            Play
        </div>
        <div class="context-menu-item" data-action="favorite">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M8 2l2 4h5l-3.5 3 1.5 5-5-3-5 3 1.5-5L1 6h5l2-4z"/>
            </svg>
            Add to Favorites
        </div>
        <div class="context-menu-item" data-action="download">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 2v8m-3-3l3 3 3-3M2 12v2h12v-2"/>
            </svg>
            Download
        </div>
        <div class="context-menu-item" data-action="share">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M12 5a2 2 0 100-4 2 2 0 000 4zM4 10a2 2 0 100-4 2 2 0 000 4zm8 5a2 2 0 100-4 2 2 0 000 4zM5.5 9l5-2M5.5 9l5 2"/>
            </svg>
            Share
        </div>
        <div class="context-menu-item" data-action="lyrics">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2 3h12v2H2V3zm0 4h12v2H2V7zm0 4h8v2H2v-2z"/>
            </svg>
            Edit Lyrics
        </div>
        <div class="context-menu-item" data-action="artwork">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2 2h12v12H2V2zm2 2v6l2-2 2 2 2-2v-4H4zm6 0h2v2h-2V4z"/>
            </svg>
            Change Cover Art
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" data-action="delete">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M5 1h6v2H5V1zM2 4h12v2H2V4zm1 3h10v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7z"/>
            </svg>
            Delete
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Color Thief for extracting colors from artwork -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
